<?xml version="1.0" encoding="UTF-8"?>
<protocol name="zinf_gamepad_unstable_v1">
    <copyright>
    Copyright Â© 2026 Cubix Entertainment

    Permission to use, copy, modify, distribute, and sell this
    software and its documentation for any purpose is hereby granted
    without fee, provided that the above copyright notice appear in
    all copies and that both that copyright notice and this permission
    notice appear in supporting documentation, and that the name of
    the copyright holders not be used in advertising or publicity
    pertaining to distribution of the software without specific,
    written prior permission.  The copyright holders make no
    representations about the suitability of this software for any
    purpose.  It is provided "as is" without express or implied
    warranty.

    THE COPYRIGHT HOLDERS DISCLAIM ALL WARRANTIES WITH REGARD TO THIS
    SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND
    FITNESS, IN NO EVENT SHALL THE COPYRIGHT HOLDERS BE LIABLE FOR ANY
    SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
    WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN
    AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION,
    ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF
    THIS SOFTWARE.
  </copyright>

  <description summary="Protocol for safely handling gamepad input">
    This protocol allows compositors and clients to recieve gamepad
    safely. It acts as a "middleman" ensuring that clients can
    recieve input while not exposing potential security risks with 
    exposed input file descriptors.

    This document adheres to the RFC 2119 when using words like "must",
    "should", "may", etc.

    Warning! The protocol described in this file is experimental and
    backward incompatible changes may be made. Backward compatible changes
    may be added together with the corresponding interface version bump.
    Backward incompatible changes are done by bumping the version number in
    the protocol and interface names and resetting the interface version.
    Once the protocol is to be declared stable, the 'z' prefix and the
    version number in the protocol and interface names are removed and the
    interface version number is reset.
  </description>

  <interface name="zinf_gamepad_v1" version="1">
    <description summary="gamepad">
        The zinf_gamepad_v1 interface refers to a single gamepad device.
        It provides a on_leave callback, which developers may attach to
        in order to do extra cleanup after the device has already been 
        removed.
    </description>

  </interface>

  <interface name="zinf_gamepad_manager_v1" version="1">
    <description summary="gamepad manager">
        The zinf_gamepad_manager_v1 interface refers to the gamepad device manager.
        It provides a on_enter and on_leave callback, which developers may attach to
        in order to do extra cleanup after the device has already been 
        removed.
    </description>

    <request name="get_gamepads">
        <description summary="gamepad grabber">
            Returns an array of zinf_gamepads. Devices are ordered based on when
            they were added, according to the linux compositor.
        </description>
    </request>

    <request name="reset_gamepads">
        <description summary="gamepad rescanner">
            Disconnects all connected gamepads and then searches the device for 
            available gamepads.
        </description>
    </request>

    <event name="gameapd_added">
        <description summary="New gamepad callback">
            Alerts the compositor/client that a new device has been added. Also
            returns information about the gamepad as a zinf_gamepad_v1
        </description>
        
    </event>

  </interface>

</protocol>